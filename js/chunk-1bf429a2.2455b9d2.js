(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bf429a2"],{"56ab":function(t,a,e){},"59a4":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-content",{attrs:{color:"primary"}},[e("v-container",{attrs:{fluid:"",id:"main-container","grid-list-md":"","fill-height":""}},[this.$session.get("isSuperuser")?e("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.addManyCards,callback:function(a){t.addManyCards=a},expression:"addManyCards"}},[e("v-form",{ref:"formManyCards"},[e("v-card",[e("v-card-text",[e("v-row",[e("v-col",{staticClass:"px-4"},[e("v-range-slider",{staticClass:"align-center",attrs:{max:t.max,min:t.min,"hide-details":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"60px"},attrs:{rules:[t.rules.counterRange,t.rules.numberRange],"hide-details":"","single-line":"",type:"number"},model:{value:t.range[0],callback:function(a){t.$set(t.range,0,a)},expression:"range[0]"}})]},proxy:!0},{key:"append",fn:function(){return[e("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"60px"},attrs:{rules:[t.rules.counterRange,t.rules.numberRange],"hide-details":"","single-line":"",type:"number"},model:{value:t.range[1],callback:function(a){t.$set(t.range,1,a)},expression:"range[1]"}})]},proxy:!0}],null,!1,2841457502),model:{value:t.range,callback:function(a){t.range=a},expression:"range"}})],1)],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{outline:"",small:"",color:"error"},on:{click:function(a){a.stopPropagation(),t.addManyCards=!1}}},[t._v("Close")]),e("v-btn",{attrs:{small:"",text:"",color:"primary"},on:{click:function(a){return a.stopPropagation(),t.applyManyCards(a)}}},[t._v("Add")])],1)],1)],1)],1):t._e(),e("v-snackbar",{attrs:{timeout:t.timeout,top:""},model:{value:t.snackbar,callback:function(a){t.snackbar=a},expression:"snackbar"}},[t._v("\n            "+t._s(t.text)+"\n            "),e("v-btn",{attrs:{flat:""},on:{click:function(a){t.snackbar=!1}}},[t._v("\n                Close\n            ")])],1),e("v-layout",{attrs:{"justify-center":"",wrap:""}},[e("v-flex",{attrs:{sm8:"",xs12:""}},[e("v-card",{staticClass:"mx-auto",attrs:{loading:t.loading}},[e("v-list",{attrs:{"two-line":"",subheader:"",dense:""}},[e("v-subheader",[t._v("Details\n                            "),e("v-dialog",{attrs:{persistent:"","max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function(a){var s=a.on;return[e("v-btn",t._g({staticClass:"ml-auto mr-0",attrs:{color:"error",small:"",icon:"",ripple:""}},s),[e("v-icon",{attrs:{small:""}},[t._v("delete")])],1)]}}]),model:{value:t.deleteDialog,callback:function(a){t.deleteDialog=a},expression:"deleteDialog"}},[e("v-card",[e("v-card-title",{staticClass:"headline"},[t._v("Lorem ipsum dolor sit.")]),e("v-card-text",[t._v("Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consectetur\n                                        adipisicing elit. Quam, similique.\n                                    ")]),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{small:"",color:"error"},on:{click:function(a){t.deleteDialog=!1}}},[t._v("Close")]),e("v-btn",{attrs:{outline:"",small:"",color:"error"},on:{click:t.deleteSubscriber}},[t._v("Delete")])],1)],1)],1)],1),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("person")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Name")]),e("p",{staticClass:"mb-0"},[t._v(t._s(t.details.first_name)+" "+t._s(t.details.last_name)+"\n                                ")])],1)],1),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("person")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Username")]),e("p",{staticClass:"mb-0"},[t._v(t._s(t.details.username)+"\n                                ")])],1)],1),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("branding_watermark")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("RRR")]),e("p",{staticClass:"mb-0"},[t._v(t._s(t.details.rrr)+"\n                                ")])],1)],1),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("check")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Status verification")]),e("p",{staticClass:"mb-0"},[t._v(t._s(t.details.is_activated)+"\n                                ")])],1)],1),t.$store.getters.isPREPAYMENT?t._e():e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("account_balance_wallet")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Balance")]),e("p",{staticClass:"mb-0"},[t._v(t._s(t.details.balance))])],1),e("v-list-tile-action",[e("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(a){var s=a.on;return[e("v-btn",t._g({attrs:{icon:"",ripple:""}},s),[e("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("edit")])],1)]}}],null,!1,1184236067),model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[e("v-card",[e("v-card-text",[e("v-container",{attrs:{"grid-list-md":""}},[e("v-layout",{attrs:{wrap:""}},[e("v-flex",{attrs:{xs12:""}},[e("v-form",{ref:"form"},[e("v-text-field",{attrs:{label:"Balance",type:"number",required:"",rules:[t.rules.counter,t.rules.number]},model:{value:t.newBalance,callback:function(a){t.newBalance=a},expression:"newBalance"}})],1)],1)],1)],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"primary",text:""},on:{click:function(a){t.dialog=!1}}},[t._v("Close")]),e("v-btn",{attrs:{color:"primary",text:""},on:{click:t.changeBalance}},[t._v("Save")])],1)],1)],1)],1)],1),t.$store.getters.isPREPAYMENT?t._e():e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("account_balance_wallet")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Credit")]),e("p",{staticClass:"mb-0"},[t._v(t._s(t.details.credit))])],1)],1),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("card_membership")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Card price")]),e("p",{staticClass:"mb-0"},[t._v(t._s(t.details.price_card))])],1)],1),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("mail")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Email")]),e("p",{staticClass:"mb-0"},[t._v(t._s(t.details.email))])],1)],1),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("phone")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Phone")]),e("p",{staticClass:"mb-0"},[t._v(t._s(t.details.telephone))])],1)],1),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("place")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Address")]),e("p",{staticClass:"mb-0"},[t._v(t._s(t.details.address))])],1)],1),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("place")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Zone")]),e("p",{staticClass:"mb-0"},[t._v(t._s(t.details.zone))])],1)],1),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("comment")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Comment")]),e("p",{staticClass:"mb-0"},[t._v(t._s(t.details.comment)+"\n                                ")])],1)],1)],1)],1),t.$session.get("isSuperuser")?e("v-card",{staticClass:"mt-3"},[e("v-card-title",[e("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:t.searchLogs,callback:function(a){t.searchLogs=a},expression:"searchLogs"}})],1)],1):t._e(),t.$session.get("isSuperuser")?e("v-card",{staticClass:"my-3"},[e("v-subheader",[t._v("Logs")]),e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headersLogs,items:t.details.logs,"items-per-page":"5",search:t.searchLogs},scopedSlots:t._u([{key:"items",fn:function(a){return[e("td",{staticClass:"text-xs-left no-wrap"},[t._v(t._s(a.item.date))]),e("td",{staticClass:"text-xs-left no-wrap"},[t._v(t._s(a.item.log))])]}}],null,!1,1050048653)})],1):t._e()],1),e("v-flex",{attrs:{sm4:"",xs12:""}},[e("v-card",{staticClass:"mb-3"},[e("v-card-title",[e("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}})],1)],1),e("v-card",{staticClass:"my-3"},[e("v-subheader",[t._v("Cards")]),e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.cards,"items-per-page":"5",loading:t.loadingCards,search:t.search},scopedSlots:t._u([{key:"items",fn:function(a){return[e("td",{staticClass:"text-xs-left no-wrap"},[t._v(t._s(a.item.label))]),e("td",{staticClass:"text-xs-left no-wrap"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on;return[e("v-btn",t._g({attrs:{to:"/cards/"+a.item.pk+"/details/",color:"info",ripple:"",icon:"",small:"",dark:""}},i),[e("v-icon",{attrs:{small:""}},[t._v("info")])],1)]}}],null,!0)},[e("span",[t._v("Detail")])]),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on;return[e("v-btn",t._g({attrs:{color:"error",ripple:"",icon:"",small:"",dark:""},on:{click:function(e){return t.removeCard(a.item.pk)}}},i),[e("v-icon",{attrs:{small:""}},[t._v("close")])],1)]}}],null,!0)},[e("span",[t._v("Remove")])])],1)]}}])})],1),e("v-card",{staticClass:"my-3"},[e("v-subheader",[t._v("Available cards")]),e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.aviableCards,"items-per-page":"5",loading:t.loadingAviableCards,search:t.search},scopedSlots:t._u([{key:"items",fn:function(a){return[e("td",{staticClass:"text-xs-left no-wrap"},[t._v(t._s(a.item.label))]),e("td",{staticClass:"text-xs-left no-wrap"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on;return[e("v-btn",t._g({attrs:{to:"/cards/"+a.item.pk+"/details/",color:"info",ripple:"",icon:"",small:"",dark:""}},i),[e("v-icon",{attrs:{small:""}},[t._v("info")])],1)]}}],null,!0)},[e("span",[t._v("Detail")])]),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on;return[e("v-btn",t._g({attrs:{color:"success",ripple:"",icon:"",small:"",dark:""},on:{click:function(e){return t.addCard(a.item.pk)}}},i),[e("v-icon",{attrs:{small:""}},[t._v("add")])],1)]}}],null,!0)},[e("span",[t._v("Add")])])],1)]}}])})],1)],1)],1),t.$session.get("isSuperuser")&&t.aviableCards?e("v-btn",{attrs:{color:"primary",dark:"",fixed:"",bottom:"",right:"",fab:"",transition:"slide-y-transition"}},[e("v-icon",{on:{click:function(a){a.stopPropagation(),t.addManyCards=!0}}},[t._v("library_add")])],1):t._e()],1)],1)},i=[],n=e("bc3a"),l=e.n(n),r={name:"ResellersDetails",data:function(){return{snack:!1,snackColor:"",snackText:"",loading:!0,loadingCards:!0,loadingAviableCards:!0,snackbar:!1,dialog:!1,deleteDialog:!1,search:"",searchLogs:"",text:"Oops... Something went wrong",timeout:5e3,newBalance:"",addManyCards:!1,details:{address:"",balance:0,cards:Array(0),email:""},headers:[{text:"Label",align:"left",value:"label"},{text:"Action",value:"action",sortable:!1}],headersLogs:[{text:"Date",value:"date"},{text:"Header",align:"left",value:"log"}],cards:[],aviableCards:[],min:1,range:[],rules:{counter:function(t){return t<=2147483647||"Max 2147483647"},number:function(t){var a=/^\d+$/;return a.test(t)||"Invalid number."},counterRange:function(t){return t<=2147483647&&t>=1||"Min 1 and Max 2147483647"},numberRange:function(t){var a=/^\d+$/;return a.test(t)||"Invalid number."}}}},computed:{max:function(){return this.min+99}},methods:{getData:function(){var t=this;this.loadingCards=!0,l.a.get("".concat(this.$hostname,"/api/resellers/").concat(this.$route.params.id,"/")).then(function(a){200===a.status&&(console.log(a.data),t.details=a.data,t.cards=t.details.cards,t.newBalance=t.details.balance,t.loadingCards=!1,t.details.is_activated=t.details.is_activated?"Active":"Inactive")}).catch(function(a){t.text="Connection error",console.log(a),t.snackbar=!0}),this.loadingAviableCards=!0,l.a.get("".concat(this.$hostname,"/api/resellers/filter-cards/")).then(function(a){200===a.status&&(t.aviableCards=a.data,t.loadingAviableCards=!1,t.min=1,t.range=[t.min,t.aviableCards.length-1])}).catch(function(a){t.text="Connection error",console.log(a),t.snackbar=!0})},changeBalance:function(){var t=this;if(this.$refs.form.validate()){this.loading=!0;var a={balance:this.newBalance};l.a.put("".concat(this.$hostname,"/api/subscribers/edit/balance/").concat(this.$route.params.id,"/"),a).then(function(a){200===a.status&&(t.details.balance=a.data.balance,t.newBalance=t.details.balance,t.loading=!1,t.dialog=!1,t.text="Balance changed!",t.snackbar=!0)}).catch(function(a){400===a.response.status?(t.text="Balance too low",t.snackbar=!0,t.dialog=!1):(t.text="Connection error",console.log(a),t.snackbar=!0)})}else this.text="Fill the form correctly",this.snackbar=!0},addCard:function(t){var a=this;l.a.put("".concat(this.$hostname,"/api/resellers/tie/").concat(this.$route.params.id,"/"),{card:t}).then(function(t){200===t.status&&(console.log(t.data),a.getData())}).catch(function(t){a.text="Connection error",console.log(t),a.snackbar=!0})},applyManyCards:function(){var t=this;this.$refs.formManyCards.validate()?(this.loading=!0,l.a.put("".concat(this.$hostname,"/api/resellers/tie/cards/").concat(this.$route.params.id,"/"),{start:this.range[0],stop:this.range[1]}).then(function(a){console.log(a.data),200===a.status&&(t.getData(),t.text="Cards from ".concat(t.range[0]," to ").concat(t.range[1]," were applied!"),t.snackbar=!0,t.addManyCards=!1)}).catch(function(a){400===a.response.status?(t.text="Incorrect range",t.snackbar=!0,t.dialog=!1):(t.text="Connection error",console.log(a),t.snackbar=!0)})):(this.text="Fill the form correctly",this.snackbar=!0)},removeCard:function(t){var a=this;l.a.put("".concat(this.$hostname,"/api/resellers/pickup/").concat(this.$route.params.id,"/"),{card:t}).then(function(t){200===t.status&&(console.log(t.data),a.getData())}).catch(function(t){a.text="Connection error",console.log(t),a.snackbar=!0})},deleteSubscriber:function(){var t=this;l.a.delete("".concat(this.$hostname,"/api/resellers/delete/").concat(this.$route.params.id,"/")).then(function(a){204===a.status&&(console.log(a.data),t.$router.push("/resellers"))}).catch(function(a){t.text="Connection error",console.log(a),t.snackbar=!0})}},beforeCreate:function(){this.$session.exists()||this.$router.push("/")},mounted:function(){this.getData()}},o=r,c=(e("fe51"),e("2877")),d=e("6544"),v=e.n(d),u=e("8336"),p=e("b0af"),m=e("99d9"),g=e("12b2"),h=e("a523"),f=e("549c"),b=e("8fea"),_=e("169a"),C=e("0e8f"),x=e("4bd4"),k=e("132d"),y=e("a722"),w=e("8860"),$=e("ba95"),S=e("40fe"),V=e("c954"),L=e("5d23"),D=e("5963"),A=e("2db4"),M=e("9910"),B=e("e0c7"),R=e("2677"),T=e("3a2f"),P=Object(c["a"])(o,s,i,!1,null,"2bd3dbdc",null);a["default"]=P.exports;v()(P,{VBtn:u["a"],VCard:p["a"],VCardActions:m["a"],VCardText:m["b"],VCardTitle:g["a"],VContainer:h["a"],VContent:f["a"],VDataTable:b["a"],VDialog:_["a"],VFlex:C["a"],VForm:x["a"],VIcon:k["a"],VLayout:y["a"],VList:w["a"],VListTile:$["a"],VListTileAction:S["a"],VListTileAvatar:V["a"],VListTileContent:L["a"],VListTileTitle:L["c"],VRangeSlider:D["a"],VSnackbar:A["a"],VSpacer:M["a"],VSubheader:B["a"],VTextField:R["a"],VTooltip:T["a"]})},fe51:function(t,a,e){"use strict";var s=e("56ab"),i=e.n(s);i.a}}]);
//# sourceMappingURL=chunk-1bf429a2.2455b9d2.js.map