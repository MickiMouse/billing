(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20e872"],{b06d:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-content",{attrs:{color:"primary"}},[e("v-container",{attrs:{fluid:"",id:"main-container","grid-list-md":"","fill-height":""}},[e("v-snackbar",{attrs:{timeout:t.timeout,top:""},model:{value:t.snackbar,callback:function(a){t.snackbar=a},expression:"snackbar"}},[t._v("\n            "+t._s(t.text)+"\n            "),e("v-btn",{attrs:{flat:""},on:{click:function(a){t.snackbar=!1}}},[t._v("\n                Close\n            ")])],1),e("v-layout",{attrs:{"justify-center":""}},[e("v-flex",{attrs:{md8:""}},[e("v-card",{staticClass:"mx-auto",attrs:{loading:t.loading}},[e("v-list",{attrs:{"two-line":"",subheader:"",dense:""}},[e("v-subheader",[t._v("Details\n                            ")]),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("folder_special")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Label")]),e("v-list-tile-sub-title",[t._v(t._s(t.details.label)+"\n                                ")])],1)],1),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("playlist_add_check")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Status")]),e("v-list-tile-sub-title",[t._v(t._s(t.details.status))])],1)],1),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("account_balance_wallet")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Price")]),e("v-list-tile-sub-title",[t._v(t._s(t.details.price))])],1)],1),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("event_busy")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Expired date")]),e("v-list-tile-sub-title",[t._v(t._s(t.details.expired_date))])],1)],1),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("event_note")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Last change")]),e("v-list-tile-sub-title",[t._v(t._s(t.details.last_change))])],1)],1),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("insert_invitation")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Created at")]),e("v-list-tile-sub-title",[t._v(t._s(t.details.created_at))])],1)],1),t.details.subscriber?e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("person")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Subscriber")]),e("v-list-tile-sub-title",[t._v(t._s(t.details.subscriber.email))])],1),e("v-list-tile-avatar",[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(a){var s=a.on;return[e("v-btn",t._g({attrs:{to:"/subscribers/"+t.details.subscriber.pk+"/details/",color:"info",ripple:"",icon:"",small:"",dark:""}},s),[e("v-icon",{attrs:{small:""}},[t._v("info")])],1)]}}],null,!1,1497581810)},[e("span",[t._v("Detail")])])],1)],1):t._e(),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("people")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Reseller")]),e("v-list-tile-sub-title",[t._v(t._s(t.details.reseller.email))])],1),e("v-list-tile-avatar",[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(a){var s=a.on;return[e("v-btn",t._g({attrs:{to:"/resellers/"+t.details.reseller.pk+"/details/",color:"info",ripple:"",icon:"",small:"",dark:""}},s),[e("v-icon",{attrs:{small:""}},[t._v("info")])],1)]}}])},[e("span",[t._v("Detail")])])],1)],1)],1)],1)],1),e("v-flex",{attrs:{md4:""}},[e("v-card",{staticClass:"mb-3"},[e("v-card-title",[e("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}})],1)],1),e("v-card",{staticClass:"my-3"},[e("v-subheader",[t._v("Packages")]),e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.packages,"items-per-page":"5",loading:t.loadingPackages,search:t.search},scopedSlots:t._u([{key:"items",fn:function(a){return[e("td",{staticClass:"text-xs-left no-wrap"},[t._v(t._s(a.item.header))]),e("td",{staticClass:"text-xs-left no-wrap"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on;return[e("v-btn",t._g({attrs:{to:"/packages/"+a.item.pk+"/details/",color:"info",ripple:"",icon:"",small:"",dark:""}},i),[e("v-icon",{attrs:{small:""}},[t._v("info")])],1)]}}],null,!0)},[e("span",[t._v("Detail")])]),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on;return[e("v-btn",t._g({attrs:{color:"error",ripple:"",icon:"",small:"",dark:""},on:{click:function(e){return t.removeCard(a.item.pk)}}},i),[e("v-icon",{attrs:{small:""}},[t._v("close")])],1)]}}],null,!0)},[e("span",[t._v("Remove")])])],1)]}}])})],1),e("v-card",{staticClass:"my-3"},[e("v-subheader",[t._v("Available packages")]),e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.aviablePackages,"items-per-page":"5",loading:t.loadingAviablePackages,search:t.search},scopedSlots:t._u([{key:"items",fn:function(a){return[e("td",{staticClass:"text-xs-left no-wrap"},[t._v(t._s(a.item.header))]),e("td",{staticClass:"text-xs-left no-wrap"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on;return[e("v-btn",t._g({attrs:{to:"/packages/"+a.item.pk+"/details/",color:"info",ripple:"",icon:"",small:"",dark:""}},i),[e("v-icon",{attrs:{small:""}},[t._v("info")])],1)]}}],null,!0)},[e("span",[t._v("Detail")])]),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on;return[e("v-btn",t._g({attrs:{color:"success",ripple:"",icon:"",small:"",dark:""},on:{click:function(e){return t.addPackage(a.item.pk)}}},i),[e("v-icon",{attrs:{small:""}},[t._v("add")])],1)]}}],null,!0)},[e("span",[t._v("Add")])])],1)]}}])})],1)],1)],1)],1)],1)},i=[],l=e("bc3a"),n=e.n(l),c={name:"CardsDetails",data:function(){return{snack:!1,snackColor:"",snackText:"",loading:!0,loadingPackages:!0,loadingAviablePackages:!0,snackbar:!1,dialog:!1,search:"",text:"Oops... Something went wrong",timeout:5e3,newBalance:"",details:{address:"",balance:0,cards:Array(0),email:"",first_name:"",id:0,last_name:"",reseller:0,telephone:""},headers:[{text:"Header",align:"left",value:"header"},{text:"Action",value:"action",sortable:!1}],packages:[],aviablePackages:[],rules:{counter:function(t){return t<=2147483647||"Max 2147483647"},number:function(t){var a=/^\d+$/;return a.test(t)||"Invalid number."}}}},computed:{},methods:{save:function(){this.snack=!0,this.snackColor="success",this.snackText="Data saved"},cancel:function(){this.snack=!0,this.snackColor="error",this.snackText="Canceled"},getData:function(){var t=this;this.loadingPackages=!0,n.a.get("".concat(this.$hostname,"/api/cards/").concat(this.$route.params.id,"/")).then(function(a){200===a.status&&(console.log(a.data),t.details=a.data,t.packages=t.details.packages,t.newBalance=t.details.balance,t.loadingPackages=!1,console.log(a.data))}).catch(function(a){t.text="Connection error",console.log(a),t.snackbar=!0}),this.loadingAviablePackages=!0,n.a.get("".concat(this.$hostname,"/api/packages-filter/").concat(this.$route.params.id,"/")).then(function(a){200===a.status&&(t.aviablePackages=a.data,t.loadingAviablePackages=!1,console.log(a.data))}).catch(function(a){t.text="Connection error",console.log(a),t.snackbar=!0})},changeBalance:function(){var t=this;if(this.$refs.form.validate()){this.loading=!0;var a={balance:this.newBalance};n.a.put("".concat(this.$hostname,"/api/subscribers/edit/balance/").concat(this.$route.params.id,"/"),a).then(function(a){200===a.status&&(t.details.balance=a.data.balance,t.newBalance=t.details.balance,t.loading=!1,t.dialog=!1,t.text="Balance changed!",t.snackbar=!0)}).catch(function(a){t.text="Connection error",console.log(a),t.snackbar=!0})}else this.text="Fill the form correctly",this.snackbar=!0},addPackage:function(t){var a=this;n.a.put("".concat(this.$hostname,"/api/cards/edit/package/").concat(this.$route.params.id,"/"),{package:t}).then(function(t){200===t.status&&(console.log(t.data),a.getData())}).catch(function(t){a.text="Connection error",console.log(t),a.snackbar=!0})},removeCard:function(t){var a=this;n.a.put("".concat(this.$hostname,"/api/cards/delete/package/").concat(this.$route.params.id,"/"),{package:t}).then(function(t){200===t.status&&(console.log(t.data),a.getData())}).catch(function(t){a.text="Connection error",console.log(t),a.snackbar=!0})},deleteSubscriber:function(){var t=this;n.a.delete("".concat(this.$hostname,"/api/subscribers/delete/").concat(this.$route.params.id,"/")).then(function(a){200===a.status&&(console.log(a.data),t.$router.push("/subscribers"))}).catch(function(a){t.text="Connection error",console.log(a),t.snackbar=!0})}},beforeCreate:function(){this.$session.exists()||this.$router.push("/")},mounted:function(){this.getData()}},o=c,r=e("2877"),v=e("6544"),d=e.n(v),u=e("8336"),h=e("b0af"),b=e("12b2"),p=e("a523"),g=e("549c"),f=e("8fea"),k=e("0e8f"),_=e("132d"),m=e("a722"),x=e("8860"),C=e("ba95"),w=e("c954"),y=e("5d23"),V=e("2db4"),$=e("e0c7"),S=e("2677"),P=e("3a2f"),T=Object(r["a"])(o,s,i,!1,null,"e40cfc88",null);a["default"]=T.exports;d()(T,{VBtn:u["a"],VCard:h["a"],VCardTitle:b["a"],VContainer:p["a"],VContent:g["a"],VDataTable:f["a"],VFlex:k["a"],VIcon:_["a"],VLayout:m["a"],VList:x["a"],VListTile:C["a"],VListTileAvatar:w["a"],VListTileContent:y["a"],VListTileSubTitle:y["b"],VListTileTitle:y["c"],VSnackbar:V["a"],VSubheader:$["a"],VTextField:S["a"],VTooltip:P["a"]})}}]);
//# sourceMappingURL=chunk-2d20e872.c732b6e3.js.map