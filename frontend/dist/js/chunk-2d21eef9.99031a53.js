(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21eef9"],{d84c:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-content",{attrs:{color:"primary"}},[e("v-container",{attrs:{fluid:"",id:"main-container","grid-list-md":"","fill-height":""}},[e("v-snackbar",{attrs:{timeout:t.timeout,top:""},model:{value:t.snackbar,callback:function(a){t.snackbar=a},expression:"snackbar"}},[t._v("\n            "+t._s(t.text)+"\n            "),e("v-btn",{attrs:{flat:""},on:{click:function(a){t.snackbar=!1}}},[t._v("\n                Close\n            ")])],1),e("v-layout",{attrs:{"justify-center":""}},[e("v-flex",{attrs:{md8:""}},[e("v-card",{staticClass:"mx-auto",attrs:{loading:t.loading}},[e("v-list",{attrs:{"two-line":"",subheader:"",dense:""}},[e("v-subheader",[t._v("Details\n                            "),e("v-btn",{staticClass:"ml-auto mr-0",attrs:{color:"error",small:"",icon:"",ripple:""},on:{click:t.deleteSubscriber}},[e("v-icon",{attrs:{small:""}},[t._v("delete")])],1)],1),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("person")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Name")]),e("v-list-tile-sub-title",[t._v(t._s(t.details.first_name)+" "+t._s(t.details.last_name)+"\n                                ")])],1)],1),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("account_balance_wallet")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Balance")]),e("v-list-tile-sub-title",[t._v(t._s(t.details.balance))])],1),e("v-list-tile-action",[e("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(a){var s=a.on;return[e("v-btn",t._g({attrs:{icon:"",ripple:""}},s),[e("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("edit")])],1)]}}]),model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[e("v-card",[e("v-card-text",[e("v-container",{attrs:{"grid-list-md":""}},[e("v-layout",{attrs:{wrap:""}},[e("v-flex",{attrs:{xs12:""}},[e("v-form",{ref:"form"},[e("v-text-field",{attrs:{label:"Balance",type:"number",required:"",rules:[t.rules.counter,t.rules.number]},model:{value:t.newBalance,callback:function(a){t.newBalance=a},expression:"newBalance"}})],1)],1)],1)],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"primary",text:""},on:{click:function(a){t.dialog=!1}}},[t._v("Close")]),e("v-btn",{attrs:{color:"primary",text:""},on:{click:t.changeBalance}},[t._v("Save")])],1)],1)],1)],1)],1),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("mail")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Email")]),e("v-list-tile-sub-title",[t._v(t._s(t.details.email))])],1)],1),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("phone")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Phone")]),e("v-list-tile-sub-title",[t._v(t._s(t.details.telephone))])],1)],1),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("place")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Address")]),e("v-list-tile-sub-title",[t._v(t._s(t.details.address))])],1)],1),e("v-list-tile",{attrs:{avatar:""},on:{click:function(t){}}},[e("v-list-tile-avatar",[e("v-icon",{staticClass:"grey lighten-1 white--text"},[t._v("people")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v("Reseller")]),e("v-list-tile-sub-title",[t._v(t._s(t.details.reseller.email))])],1)],1)],1)],1)],1),e("v-flex",{attrs:{md4:""}},[e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.cards,"items-per-page":"5",loading:t.loadingCards},scopedSlots:t._u([{key:"items",fn:function(a){return[e("td",{staticClass:"text-xs-left no-wrap"},[t._v(t._s(a.item.label))]),e("td",{staticClass:"text-xs-left no-wrap"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on;return[e("v-btn",t._g({attrs:{to:"/cards/"+a.item.pk+"/details/",color:"info",fab:"",small:"",dark:""}},i),[e("v-icon",[t._v("info")])],1)]}}],null,!0)},[e("span",[t._v("Detail")])]),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on;return[e("v-btn",t._g({attrs:{color:"error",fab:"",small:"",dark:""},on:{click:function(e){return t.removeCard(a.item.pk)}}},i),[e("v-icon",[t._v("close")])],1)]}}],null,!0)},[e("span",[t._v("Remove")])])],1)]}}])}),e("v-data-table",{staticClass:"elevation-1 mt-3",attrs:{headers:t.headers,items:t.aviableCards,"items-per-page":"5",loading:t.loadingAviableCards},scopedSlots:t._u([{key:"items",fn:function(a){return[e("td",{staticClass:"text-xs-left no-wrap"},[t._v(t._s(a.item.label))]),e("td",{staticClass:"text-xs-left no-wrap"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on;return[e("v-btn",t._g({attrs:{to:"/cards/"+a.item.pk+"/details/",color:"info",fab:"",small:"",dark:""}},i),[e("v-icon",[t._v("info")])],1)]}}],null,!0)},[e("span",[t._v("Detail")])]),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on;return[e("v-btn",t._g({attrs:{color:"success",fab:"",small:"",dark:""},on:{click:function(e){return t.addCard(a.item.pk)}}},i),[e("v-icon",[t._v("add")])],1)]}}],null,!0)},[e("span",[t._v("Add")])])],1)]}}])})],1)],1)],1)],1)},i=[],n=e("bc3a"),l=e.n(n),o={name:"SubscribersDetails",data:function(){return{snack:!1,snackColor:"",snackText:"",loading:!0,loadingCards:!0,loadingAviableCards:!0,snackbar:!1,dialog:!1,text:"Oops... Something went wrong",timeout:5e3,newBalance:"",details:{address:"",balance:0,cards:Array(0),email:"",first_name:"",id:0,last_name:"",reseller:0,telephone:""},headers:[{text:"Label",align:"left",value:"label"},{text:"Action",value:"action",sortable:!1}],cards:[],aviableCards:[],rules:{counter:function(t){return t<=2147483647||"Max 2147483647"},number:function(t){var a=/^\d+$/;return a.test(t)||"Invalid number."}}}},methods:{save:function(){this.snack=!0,this.snackColor="success",this.snackText="Data saved"},cancel:function(){this.snack=!0,this.snackColor="error",this.snackText="Canceled"},getData:function(){var t=this;this.loadingCards=!0,l.a.get("".concat(this.$hostname,"/api/subscribers/").concat(this.$route.params.id,"/")).then(function(a){200===a.status&&(t.details=a.data,t.cards=t.details.cards,t.newBalance=t.details.balance,t.loadingCards=!1,console.log(a.data))}).catch(function(a){t.text="Connection error",console.log(a),t.snackbar=!0}),this.loadingAviableCards=!0,l.a.get("".concat(this.$hostname,"/api/subscribers/edit/cards/").concat(this.$route.params.id,"/")).then(function(a){200===a.status&&(t.aviableCards=a.data,t.loadingAviableCards=!1,console.log(a.data))}).catch(function(a){t.text="Connection error",console.log(a),t.snackbar=!0})},changeBalance:function(){var t=this;if(this.$refs.form.validate()){this.loading=!0;var a={balance:this.newBalance};l.a.put("".concat(this.$hostname,"/api/subscribers/edit/balance/").concat(this.$route.params.id,"/"),a).then(function(a){200===a.status&&(t.details.balance=a.data.balance,t.newBalance=t.details.balance,t.loading=!1,t.dialog=!1,t.text="Balance changed!",t.snackbar=!0)}).catch(function(a){t.text="Connection error",console.log(a),t.snackbar=!0})}else this.text="Fill the form correctly",this.snackbar=!0},addCard:function(t){var a=this;l.a.put("".concat(this.$hostname,"/api/subscribers/edit/cards/").concat(this.$route.params.id,"/"),{card:t}).then(function(t){200===t.status&&(console.log(t.data),a.getData())}).catch(function(t){a.text="Connection error",console.log(t),a.snackbar=!0})},removeCard:function(t){var a=this;l.a.put("".concat(this.$hostname,"/api/subscribers/delete/cards/").concat(this.$route.params.id,"/"),{card:t}).then(function(t){200===t.status&&(console.log(t.data),a.getData())}).catch(function(t){a.text="Connection error",console.log(t),a.snackbar=!0})},deleteSubscriber:function(){var t=this;l.a.delete("".concat(this.$hostname,"/api/subscribers/delete/").concat(this.$route.params.id,"/")).then(function(a){200===a.status&&(console.log(a.data),t.$router.push("/subscribers"))}).catch(function(a){t.text="Connection error",console.log(a),t.snackbar=!0})}},beforeCreate:function(){this.$session.exists()||this.$router.push("/")},mounted:function(){this.getData()}},r=o,c=e("2877"),d=e("6544"),v=e.n(d),u=e("8336"),b=e("b0af"),f=e("99d9"),h=e("a523"),m=e("549c"),p=e("8fea"),g=e("169a"),_=e("0e8f"),k=e("4bd4"),x=e("132d"),C=e("a722"),w=e("8860"),y=e("ba95"),V=e("40fe"),$=e("c954"),S=e("5d23"),T=e("2db4"),B=e("9910"),A=e("e0c7"),D=e("2677"),L=e("3a2f"),F=Object(c["a"])(r,s,i,!1,null,"cca1f1d8",null);a["default"]=F.exports;v()(F,{VBtn:u["a"],VCard:b["a"],VCardActions:f["a"],VCardText:f["b"],VContainer:h["a"],VContent:m["a"],VDataTable:p["a"],VDialog:g["a"],VFlex:_["a"],VForm:k["a"],VIcon:x["a"],VLayout:C["a"],VList:w["a"],VListTile:y["a"],VListTileAction:V["a"],VListTileAvatar:$["a"],VListTileContent:S["a"],VListTileSubTitle:S["b"],VListTileTitle:S["c"],VSnackbar:T["a"],VSpacer:B["a"],VSubheader:A["a"],VTextField:D["a"],VTooltip:L["a"]})}}]);
//# sourceMappingURL=chunk-2d21eef9.99031a53.js.map